企画書：Flutterアプリ「GitHub経由セルフアップデート」導入計画1. 背景と目的現在、GitHub経由でAPKを配布しているが、手動でのダウンロード・再インストールは一般ユーザー（および開発者自身）にとって手間が大きく、更新が滞る原因となっている。Google Playストアを利用せず（コスト回避・非公開維持）、アプリ内で更新を完結させることで、ユーザー体験の向上と最新バージョンの維持を実現する。2. 実装システムの全体像本システムは、「バージョン情報の管理」「更新の検知」「ダウンロードと実行」の3段階で構成する。① 配布サーバー側（GitHub）version.json: 最新のバージョン番号とAPKのURLを記述したメタデータ。APKファイル: GitHub Releasesにアップロードされた実行ファイル。② アプリ側（Flutter）チェック機能: 起動時にJSONを読み込み、現バージョンと比較。案内UI: 更新がある場合、ダイアログを表示。OTA（Over-The-Air）エンジン: バックグラウンドでAPKを取得し、Androidシステムへインストールを依頼。3. 必要な技術要素・パッケージ以下のコンポーネントを組み合わせて実装する。要素使用ツール / パッケージ役割自アプリ情報取得package_info_plus現在のバージョン番号を特定通信http または dioGitHub上のJSONファイルを読み取る更新処理ota_updateAPKのDLからインストーラー起動までを一括処理権限管理AndroidManifest.xmlインストール権限の宣言4. ユーザー操作フロー（UX設計）起動: アプリが自動で更新を確認。通知: 「最新版（vX.X.X）があります。更新しますか？」と表示。許可（初回のみ）: Androidの設定画面が開くので「このソースを許可」をONにする。更新: プログレスバーが表示され、完了後に自動でインストール画面が起動。完了: 「インストール」ボタンを押して終了。5. 開発タスクリスト（ToDo）フェーズ1：準備[ ] GitHubのリポジトリに version.json を設置する。[ ] AndroidManifest.xml に REQUEST_INSTALL_PACKAGES 権限を追加。フェーズ2：実装[ ] 現在のバージョンとJSONの比較ロジックを作成。[ ] アップデートを促すダイアログUIの作成。[ ] ota_update を用いたダウンロード処理の実装。フェーズ3：テスト[ ] バージョンを上げたAPKを作成し、GitHubにアップロード。[ ] 旧バージョンのアプリから正常に更新が走るか確認。[ ] 権限がない場合に正しく設定画面へ誘導されるか確認。6. 注意事項（リスク管理）署名の一致: アップデート前後のAPKは、必ず同じキーストアで署名すること（不一致だとインストール失敗します）。Wi-Fi環境: APKサイズが大きい場合、モバイルデータ通信を消費する旨の警告を出すのが親切。強制更新: 致命的なバグ修正の場合は、ダイアログを閉じられない「強制アップデート」モードの実装も検討する。